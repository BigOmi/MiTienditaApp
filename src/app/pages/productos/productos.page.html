<ion-content [fullscreen]="true" class="productos-content">
  <ion-grid class="ion-padding">
    <!-- Filtros y búsqueda -->
    <ion-row class="ion-align-items-center filtros-row" no-wrap>
      <ion-col size="12" size-md="5">
        <ion-searchbar
          [(ngModel)]="buscarproduct"
          debounce="300"
          placeholder="Buscar producto..."
          class="searchbar-custom"
        ></ion-searchbar>
      </ion-col>

      <ion-col size="6" size-md="2">
        <ion-select
          interface="popover"
          [(ngModel)]="estadoFiltro"
          placeholder="Estado"
          ok-text="Seleccionar"
          cancel-text="Cancelar"
          class="select-filtro"
        >
          <ion-select-option value="todos">Todos</ion-select-option>
          <ion-select-option value="activos">Activos</ion-select-option>
          <ion-select-option value="inactivos">Inactivos</ion-select-option>
        </ion-select>
      </ion-col>

      <ion-col size="6" size-md="3">
        <ion-select
          interface="popover"
          [(ngModel)]="categoriaSeleccionada"
          placeholder="Categoría"
          ok-text="Seleccionar"
          cancel-text="Cancelar"
          class="select-filtro"
        >
          <ion-select-option value="Todos">Todos</ion-select-option>
          <ion-select-option *ngFor="let cat of categorias" [value]="cat">
            {{ cat }}
          </ion-select-option>
        </ion-select>
      </ion-col>

      <ion-col size="12" size-md="2" class="ion-text-end">
        <ion-button expand="block" color="success" fill="solid" size="small">
          <ion-icon slot="start" name="add-circle-outline"></ion-icon>
          Agregar
        </ion-button>
      </ion-col>
    </ion-row>

    <!-- Lista compacta de productos -->
    <ion-row class="ion-margin-top">
      <ion-col size="12" *ngFor="let producto of productosFiltrados">
        <ion-card class="producto-mini-card" [class.inactivo]="!producto.activo">
          <ion-row class="ion-align-items-center">
            <!-- Imagen -->
            <ion-col size="3" class="img-mini-col">
              <img [src]="producto.imagen" [alt]="producto.nombre" class="img-mini" />
            </ion-col>

            <!-- Info principal -->
            <ion-col size="6" class="info-mini-col">
              <h3 class="producto-nombre">{{ producto.nombre }}</h3>
              <p class="producto-precio">
                <span class="venta">${{ producto.precioVenta }}</span> mx
              </p>
              <p class="producto-stock">Stock: {{ producto.stock }}</p>
            </ion-col>

            <!-- Acciones -->
            <ion-col size="3" class="acciones-mini-col">
              <ion-button fill="clear" color="warning" size="small">
                <ion-icon
                  [name]="producto.activo ? 'ban-outline' : 'checkmark-circle-outline'"
                  slot="icon-only"
                ></ion-icon>
              </ion-button>
              <ion-button fill="clear" color="tertiary" size="small">
                <ion-icon name="create-outline" slot="icon-only"></ion-icon>
              </ion-button>
              <ion-button fill="clear" color="danger" size="small">
                <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
