<ion-content [fullscreen]="true" class="trabajadores-content">
  <ion-grid class="ion-padding">
    <!-- Filtros y búsqueda -->
    <ion-row class="ion-align-items-center filtros-row" no-wrap>
      <ion-col size="12" size-md="5">
        <ion-searchbar
          [(ngModel)]="busqueda"
          debounce="300"
          placeholder="Buscar usuario..."
          class="searchbar-custom"
        ></ion-searchbar>
      </ion-col>

      <ion-col size="6" size-md="3">
        <ion-select
          interface="popover"
          [(ngModel)]="filtroRol"
          placeholder="Rol"
          ok-text="Seleccionar"
          cancel-text="Cancelar"
          class="select-filtro"
        >
          <ion-select-option value="">Todos</ion-select-option>
          <ion-select-option value="admin">Admin</ion-select-option>
          <ion-select-option value="empleado">Empleado</ion-select-option>
        </ion-select>
      </ion-col>

      <ion-col size="6" size-md="4" class="ion-text-end">
        <ion-button expand="block" color="success" size="small" (click)="agregarUsuario()">
          <ion-icon slot="end" name="person-add-outline"></ion-icon>
          Agregar
        </ion-button>
      </ion-col>
    </ion-row>

    <!-- Lista compacta de usuarios -->
    <ion-row class="ion-margin-top">
      <ion-col size="12" *ngFor="let usuario of usuariosFiltrados()">
        <ion-card class="usuario-card">
          <ion-row class="ion-align-items-center">
            <!-- Imagen -->
            <ion-col size="3" class="img-mini-col">
              <ion-avatar class="usuario-avatar">
                <img [src]="usuario.imagen" alt="Foto" />
              </ion-avatar>
            </ion-col>

            <!-- Info -->
            <ion-col size="6" class="info-mini-col">
              <h3 class="usuario-nombre">{{ usuario.nombre }} {{ usuario.apellido }}</h3>
              <p class="usuario-email">{{ usuario.email }}</p>
              <p class="usuario-rol">{{ usuario.rol }} | {{ usuario.edad }} años</p>
              <p class="usuario-fecha">{{ usuario.created_at | date }}</p>
            </ion-col>

            <!-- Acciones -->
            <ion-col size="3" class="acciones-mini-col">
              <ion-button fill="clear" color="tertiary" size="small">
                <ion-icon name="create-outline" slot="icon-only"></ion-icon>
              </ion-button>
              <ion-button fill="clear" color="danger" size="small">
                <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
