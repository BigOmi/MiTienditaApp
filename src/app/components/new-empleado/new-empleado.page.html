<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home/usuarios"></ion-back-button>
    </ion-buttons>
    <ion-title class="ion-text-center">Crear Nuevo Usuario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="new-usuario-content">
  <ion-grid class="ion-padding">
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-md="6" size-lg="4">
        <ion-card>
          <ion-card-content>
            <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()">

              <!-- Nombre -->
              <ion-item>
                <ion-label position="floating">Nombre</ion-label>
                <ion-input type="text" formControlName="nombre"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="usuarioForm.get('nombre')?.touched && usuarioForm.get('nombre')?.invalid">
                <small>El nombre es obligatorio y debe tener entre 3 y 20 caracteres.</small>
              </ion-text>

              <!-- Apellido -->
              <ion-item>
                <ion-label position="floating">Apellido</ion-label>
                <ion-input type="text" formControlName="apellido"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="usuarioForm.get('apellido')?.touched && usuarioForm.get('apellido')?.invalid">
                <small>El apellido es obligatorio y debe tener entre 3 y 20 caracteres.</small>
              </ion-text>

              <!-- Imagen -->
              <ion-item>
                <ion-label position="floating">Imagen (URL)</ion-label>
                <ion-input type="text" formControlName="imagen"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="usuarioForm.get('imagen')?.touched && usuarioForm.get('imagen')?.invalid">
                <small>La URL de la imagen es obligatoria.</small>
              </ion-text>

              <!-- Edad -->
              <ion-item>
                <ion-label position="floating">Edad</ion-label>
                <ion-input type="number" formControlName="edad" min="0"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="usuarioForm.get('edad')?.touched && usuarioForm.get('edad')?.invalid">
                <small>La edad es obligatoria y debe ser un número válido.</small>
              </ion-text>

              <!-- Email -->
              <ion-item>
                <ion-label position="floating">Correo electrónico</ion-label>
                <ion-input type="email" formControlName="email"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="usuarioForm.get('email')?.touched && usuarioForm.get('email')?.invalid">
                <small *ngIf="usuarioForm.get('email')?.errors?.['required']">El correo es obligatorio.</small>
                <small *ngIf="usuarioForm.get('email')?.errors?.['email']">Formato de correo inválido.</small>
              </ion-text>

              <!-- Password -->
              <ion-item>
                <ion-label position="floating">Contraseña</ion-label>
                <ion-input type="password" formControlName="password"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="usuarioForm.get('password')?.touched && usuarioForm.get('password')?.invalid">
                <small *ngIf="usuarioForm.get('password')?.errors?.['required']">La contraseña es obligatoria.</small>
                <small *ngIf="usuarioForm.get('password')?.errors?.['minlength']">Debe tener al menos 3 caracteres.</small>
                <small *ngIf="usuarioForm.get('password')?.errors?.['maxlength']">No debe exceder 30 caracteres.</small>
              </ion-text>

              <!-- Rol -->
              <ion-item>
                <ion-label>Rol</ion-label>
                <ion-select formControlName="rol" placeholder="Selecciona un rol">
                  <ion-select-option value="admin">Admin</ion-select-option>
                  <ion-select-option value="empleado">Empleado</ion-select-option>
                </ion-select>
              </ion-item>
              <ion-text color="danger" *ngIf="usuarioForm.get('rol')?.touched && usuarioForm.get('rol')?.invalid">
                <small>El rol es obligatorio.</small>
              </ion-text>

              <!-- Botón Crear -->
              <ion-button
                type="submit"
                expand="block"
                class="btn-crear"
                [disabled]="usuarioForm.invalid"
              >
                Crear usuario
              </ion-button>
            </form>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
